(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var i;t.g.importScripts&&(i=t.g.location+"");var e=t.g.document;if(!i&&e&&(e.currentScript&&(i=e.currentScript.src),!i)){var s=e.getElementsByTagName("script");s.length&&(i=s[s.length-1].src)}if(!i)throw new Error("Automatic publicPath is not supported in this browser");i=i.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=i})();const i=t.p+"835147f5e2a75d363d18.png";class e{constructor(t){this.yThrust=-t,this.yVelocity=0,this.img=new Image}loadImg(t,e){return this.img.src=i,new Promise(((i,s)=>{this.img.onload=()=>{this.width=3*this.img.width,this.height=3*this.img.height,this.x=t/2-this.width/2,this.y=e-this.height/2,i()},this.img.onerror=()=>s("Error")}))}flap(){const t=3*this.yThrust;this.yVelocity+=this.yThrust,this.yVelocity<t&&(this.yVelocity=t)}}const s=t.p+"4dce8c172f24c75811c7.png",h=t.p+"ed115ee643c80ed03951.png";class r{constructor(t,i,e,s,h){this.gapSize=i,this.xSpeed=e,this.width=s,this.height=h,this.x=t,this.hasScoreInc=!1,this.pipes={top:{img:new Image,y:0,get yBottom(){return h+this.y}},bottom:{img:new Image,y:0}}}async loadImg(){const t=()=>(this.pipes.top.img.src=h,new Promise(((t,i)=>{this.pipes.top.img.onload=()=>t(),this.pipes.top.img.onerror=()=>i()}))),i=()=>(this.pipes.bottom.img.src=s,new Promise(((t,i)=>{this.pipes.bottom.img.onload=()=>t(),this.pipes.bottom.img.onerror=()=>i()})));let e=null;try{await t(),await i()}catch(t){e=t}return new Promise(((t,i)=>{null===e?t():i(e)}))}setY(t){const i=Math.random();this.pipes.top.y=i*(-t+this.gapSize)-this.gapSize,this.pipes.bottom.y=(1-i)*(t-this.gapSize)+this.gapSize}movePipe(t,i,e,s){return this.x-=this.xSpeed,this.x<=0-this.width&&(this.x=i+e*this.width,this.setY(t),this.hasScoreInc=!1),!this.hasScoreInc&&(this.x+this.width)/2<=s&&(this.hasScoreInc=!0,!0)}}class o{constructor(t,i=-50){this.gravity=-i,this.score=0,this.element=document.createElement("canvas"),this.element.id="game",this.ctx=this.element.getContext("2d"),this.ctx.imageSmoothingEnabled=!1,this.element.height=t,this.element.width=9*t/16,this.bird=new e(100),this.pipesPairs=[new r(this.element.width,150,1.5,100,t),new r(this.element.width+300,150,1.5,100,t)],this.pipesPairs.forEach((t=>t.setY(this.element.height))),document.getElementById("screen").appendChild(this.element)}async load(){try{await this.bird.loadImg(this.element.width/2,this.element.height/2),this.pipesPairs.forEach((async t=>{await t.loadImg()})),this.ctx.fillStyle="skyblue",this.ctx.fillRect(0,0,this.element.width,this.element.height),this.ctx.font="18px PublicPixel",this.ctx.fillStyle="white",this.ctx.textAlign="center",this.ctx.fillText("Press any key to start.",this.element.width/2,this.element.height/2),this.ctx.font="32px PublicPixel",this.ctx.textAlign="left",window.onkeydown=()=>{window.onkeydown=()=>this.bird.flap(),this.animate()}}catch(t){console.error(t)}}collisionCheck(){for(let t of this.pipesPairs)if((this.bird.y<t.pipes.top.yBottom||this.bird.y+this.bird.height>t.pipes.bottom.y)&&this.bird.x+this.bird.width>=t.x&&this.bird.x<=t.x+t.width)return!0;return!1}animate(){this.draw()&&requestAnimationFrame((()=>this.animate()))}draw(){const t=.06;return this.bird.yVelocity+=this.gravity*t,this.bird.y+=this.bird.yVelocity*t+(this.gravity*t^1),this.bird.y>this.element.height-this.bird.height?(this.bird.y=this.element.height-this.bird.height,this.bird.yVelocity=0):this.bird.y<0&&(this.bird.y=0,this.bird.yVelocity=0),this.pipesPairs.forEach((t=>{t.movePipe(this.element.height,300,this.pipesPairs.length,this.bird.x)&&this.score++})),this.ctx.fillStyle="skyblue",this.ctx.fillRect(0,0,this.element.width,this.element.height),this.ctx.drawImage(this.bird.img,this.bird.x,this.bird.y,this.bird.width,this.bird.height),this.pipesPairs.forEach((t=>{this.ctx.drawImage(t.pipes.top.img,t.x,t.pipes.top.y,t.width,t.height),this.ctx.drawImage(t.pipes.bottom.img,t.x,t.pipes.bottom.y,t.width,t.height)})),this.ctx.fillStyle="white",this.ctx.fillText(`${this.score}`,15,40),!this.collisionCheck()||(this.ctx.font="40px PublicPixel",this.ctx.fillStyle="white",this.ctx.textAlign="center",this.ctx.fillText("Game Over!",this.element.width/2,this.element.height/2),!1)}}let n=new o(750);function c(){n=new o(750),document.getElementById("game").remove(),n.load()}window.onload=function(){document.getElementById("restart").onclick=c,n.load()}})();